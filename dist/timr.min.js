/* TimrJS v0.4.4 | (c) 2016 Joe Smith | https://github.com/joesmith100/timrjs/blob/master/LICENSE */
(function(t){"use strict";var r=function(t,n){return new r.init(t,n)},n=function(t,r){switch(t){case"outputFormat":if(typeof r!=="string"){throw new TypeError("Warning! outputFormat needs to be of type string, instead got: "+r)}if(r!=="HH:MM:SS"&&r!=="MM:SS"&&r!=="SS"){throw new Error("Warning! outputFormat only accepts the following: HH:MM:SS, MM:SS (default) and SS, instead got: "+r)}case"separator":if(typeof r!=="string"){throw new TypeError("Warning! separator needs to be of type string, instead got: "+r)}}},i=function(t){var r={outputFormat:"MM:SS",separator:":"};if(t){for(var i in t){n(i,t[i]);r[i]=t[i]}}return r},e=function(t){return t.split(":").some(function(t,r,n){if(n.length===3&&r===0){return+t<0||+t>23||isNaN(+t)}return+t<0||+t>59||isNaN(+t)})},o=function(t){if(e(t)){throw new Error("Warning! Provided time is not in the correct format. Expected time format (HH:MM:SS, MM:SS or SS), instead got: "+t)}return t.split(":").reduce(function(t,r,n,i){var e=t+ +r*60*60,o=t+ +r*60,s=t+ +r;if(i.length===3){if(n===0){return e}if(n===1){return o}}if(i.length===2){if(n===0){return o}}return s},0)},s=function(t){return t.replace(/\d+/g,function(t){return+t<10?"0"+t:t})},u=function(t){t.currentTime-=1;t.emit("ticker",t.formatTime(),t.currentTime,t.startTime);if(t.currentTime<=0){t.emit("finish");t.stop()}},f=function(t){t.currentTime+=1;t.emit("ticker",t.formatTime(),t.currentTime)};r.prototype={constructor:r,on:function(t,r){if(!Array.isArray(this.events[t])){this.events[t]=[]}this.events[t].push(r)},emit:function(t){if(!this.events[t]||this.events[t].length===0){return}var r=[];for(var n=1,i=arguments.length;n<i;n++){r.push(arguments[n])}for(var e=0,o=this.events[t].length;e<o;e++){this.events[t][e].apply(this,r)}},start:function(){if(!this.running){this.running=true;if(this.startTime>0){this.timer=setInterval(u.bind(this,this),1e3)}else{this.timer=setInterval(f.bind(this,this),1e3)}}else{console.warn("Timer already running")}return this},pause:function(){this.clear();return this},stop:function(){this.clear();this.currentTime=this.startTime;return this},clear:function(){clearInterval(this.timer);this.running=false;return this},ticker:function(t){if(typeof t!=="function"){throw new TypeError("Warning! Ticker requires a function, instead got: "+typeof t)}this.on("ticker",t);return this},finish:function(t){if(typeof t!=="function"){throw new TypeError("Warning! Finish requires a function, instead got: "+typeof t)}this.on("finish",t);return this},formatTime:function(){var t=this.currentTime,r=t/60,n=this.options.outputFormat,i=this.options.separator;if(r>=1){var e=r/60;r=Math.floor(r);if(e>=1){e=Math.floor(e);return s(e+i+(r-e*60)+i+(t-r*60))}return s((n==="HH:MM:SS"?"0"+"sep":"")+r+i+(t-r*60))}return s((n==="HH:MM:SS"?"0"+i+"0"+i:n==="MM:SS"?"0"+i:"")+t)},getCurrentTime:function(){return this.currentTime},isRunning:function(){return this.running}};r.init=function(t,r){if(typeof t==="string"){t=o(t)}else if(typeof t!=="number"){throw new TypeError("Warning! Expected starting time to be of type string or number, instead got: "+typeof t)}this.timer=null;this.events={};this.running=false;this.options=i(r);this.startTime=t;this.currentTime=t};r.init.prototype=r.prototype;t.Timr=r})(function(){try{return window}catch(t){return global}}());
